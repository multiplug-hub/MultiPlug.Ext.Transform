@model MultiPlug.Base.Http.EdgeApp

<section class="row-fluid">

    <div class="row-fluid">
        <div class="box">
            <div class="span3">
                <a style="line-height: 52px;" href="#"><img alt="Transform Logo" src="@Raw(Model.Context.Paths.Assets)images/transform.png"></a>
            </div>
            <div class="span6">
                <p style="font-size:26px; line-height: 54px; text-align: center; margin: 0px;">Regular Expressions</p>
            </div>
            <div class="span3" style="text-align: right;">
            </div>
        </div>
    </div>

    @Include("MultiPlug.Ext.Transform.TransformationsNavigation")

    <div class="row-fluid">
        <div class="box non-collapsible">
            <div class="well">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th class="span5">Event ID</th>
                            <th class="span5">Description</th>
                            <th class="span2"></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var Regex in @Model.Extension.Model)
                        {
                            <tr>
                                <td class="span5"><a href="@Raw(Model.Context.Paths.Home)regex/?id=@Regex.Guid">@Regex.TransformedEvent.Id</a></td>
                                <td class="span5"><a href="@Raw(Model.Context.Paths.Home)regex/?id=@Regex.Guid">@Regex.TransformedEvent.Description</a></td>
                                <td class="span2">
                                    <div class="btn-group">
                                        <a class="btn btn-blue" href="@Raw(Model.Context.Paths.Home)regex/?id=@Regex.Guid"><i class="icon-edit"></i></a>
                                        <button class="item btn btn-red delete-regex" value="@Regex.Guid" type="button"><i class="icon-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                        }

                        <tr>
                            <td class="span5"></td>
                            <td class="span5"></td>
                            <td class="span2">
                                <a class="btn btn-green" href="@Raw(Model.Context.Paths.Home)regex/"><i class="icon-plus"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<script>
    function ApplyDelete(theSelector) {
        $(theSelector).on('click', '.delete-regex', function () {
            var id = $(this).attr('value');
            var closesttr = $(this).closest("tr");
            if (confirm("Delete the Regular Expression?")) {
                $.ajax({
                    type: "POST",
                    url: '@Raw(Model.Context.Paths.Current)delete/?id=' + id,
                    success: function () {
                        closesttr.remove();
                    }
                });
            }
        });
    }

    ApplyDelete(document);
</script>


